<?xml version="1.0" encoding="UTF-8"?>
<Api>
    <RequestBase type="external">
        http://fraktguide.bring.no/fraktguide
    </RequestBase>
    <RequestBase type="internal">
        /proxy/shipping-guide
    </RequestBase>
    <Parameter>
        <Title>
            Postal code
        </Title>
        <Description><![CDATA[
            <p>The postal code lookup takes two parameters:</p>
            <ul>
                <li><code>pnr</code> - the postal code to be looked up.
                <li><code>country</code> - the ISO 3166-1-alpha-2 country code.
            </ul>
        ]]></Description>
        <Example type="xml">
            <Title>
                XML
            </Title>
            <Request>
                /api/postalCode.xml?country=no&amp;pnr=1337
            </Request>
            <Content><![CDATA[
                <p>XPath for checking if the response is valid:<br />
                <code>//Response/@valid</code></p><br />
                <p>XPath for type of postalcode (NORMAL / POBOX / SPESIALCUSTOMER):<br />
                <code>//Response/@postalCodeType</code></p><br />
            ]]></Content>
        </Example>
        <Example type="json">
            <Title>
                JSON
            </Title>
            <Request>
                /api/postalCode.json?country=no&amp;pnr=1337
            </Request>
            <Content><![CDATA[
                <p>Field for checking if the response is valid:<br />
                <code>"valid": true</code></p><br />
                <p>Field for type of postalcode (NORMAL / POBOX / SPESIALCUSTOMER):<br />
                <code>"postalCodeType": "NORMAL"</code></p><br />
            ]]></Content>
        </Example>
        <Example type="html">
            <Title>
                HTML
            </Title>
            <Request>
                /api/postalCode.html?country=no&amp;pnr=1337
            </Request>
            <Content><![CDATA[
                <p>The HTML API will return a <code>span</code> element with
                <code>id="bringPostnumberQueryResult"</code>, the postal name as contents
                and the <code>class</code> either
                <code>bringPostnumberQueryValidPostnumber</code> or
                <code>bringPostnumberQueryInvalidPostnumber</code>.</p>
                <p>If the postal code has multiple city names, the response have class <code>bringPostnumberQueryValidPostnumber</code>, but the element
                will be empty.</p>
            ]]></Content>
        </Example>
    </Parameter>
    <Parameter>
        <Title>
            Country code
        </Title>
        <Description><![CDATA[
            <p>The country is specified using the <code>country</code> parameter with ISO 3166-1-alpha-2 formatted country codes.</p>
            <p>The following countries are supported:</p>
            <ul>
                <li><code>NO</code> - Norway</li>
                <li><code>DK</code> - Denmark</li>
                <li><code>SE</code> - Sweden</li>
                <li><code>FI</code> - Finland</li>
                <li><code>NL</code> - Netherlands</li>
                <li><code>DE</code> - Germany</li>
                <li><code>US</code> - United States</li>
                <li><code>BE</code> - Belgium</li>
            </ul>
            <p>The service uses <a target="_blank" href="http://www.geonames.org/">GeoNames</a> as source for all
                countries except Norway.</p>

            <p>For unsupported countries, all postal codes with be marked as valid with no city name returned. In these cases
            it is recommended to prompt the user to input the city name himself/herself.</p>
        ]]></Description>
    </Parameter>

    <Parameter>
        <Title>
            Postal codes with multiple cities
        </Title>
        <Description><![CDATA[
            <p>
                In some countries, such as for example Germany and France, postal codes are non-unique. This means that one postal code
                might have multiple city names. In these cases, the ordinary response element will be blank. The integration APIs (json and xml)
                will have separate elements containing the list of cities, while the html response will only contain the blank element.
            </p>
        ]]></Description>
        <Example type="xml">
            <Title>
                XML
            </Title>
            <Request>
                /api/postalCode.xml?country=DE&amp;pnr=99869
            </Request>
            <Content><![CDATA[
                <p>XPath example on checking whether response is valid:<br />
                <code>//Response/@valid</code></p>
            ]]></Content>
        </Example>
        <Example type="json">
            <Title>
                JSON
            </Title>
            <Request>
                /api/postalCode.json?country=DE&amp;pnr=99869
            </Request>
        </Example>
        <Example type="html">
            <Title>
                HTML
            </Title>
            <Request>
                /api/postalCode.html?country=DE&amp;pnr=99869
            </Request>
        </Example>
    </Parameter>
</Api>